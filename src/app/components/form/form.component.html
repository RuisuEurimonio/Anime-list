<div class="container">
  <h2> Formulario:  </h2>
  <ion-alert
      trigger="present-alert"
      header="Crear anime"
      [message]="alertMessage"
      [buttons]="alertButtons"
  ></ion-alert>
  <form [formGroup]="formGroup">
    <ion-grid>
      <ion-row>
        <ion-col>
          <ion-list>
            <ion-item>
              <ion-input
                class="custom-colorLabel"
                formControlName="title"
                name="title"
                label="Titulo"
                labelPlacement="floating"
              ></ion-input>
              <span class="absolute" *ngIf="!formValid && formGroup.get('title')?.errors"> Agrega un título. </span>
            </ion-item>
            <ion-item>
              <ion-input
                class="custom-colorLabel"
                formControlName="episodes"
                name="episodes"
                type="number"
                label="Episodios"
                labelPlacement="floating"
              ></ion-input>
              <span class="absolute" *ngIf="!formValid && formGroup.get('episodes')?.errors"> Agrega la cantidad de episodios. </span>
            </ion-item>
            <ion-item>
              <ion-select
                class="custom-colorLabel"
                formControlName="status"
                name="status"
                label="Estado"
                labelPlacement="floating"
              >
              <ion-select-option *ngFor="let option of statusList" [value]="option">
                {{ option }}
              </ion-select-option>
            </ion-select>
            <span class="absolute" *ngIf="!formValid && formGroup.get('status')?.errors"> Selecciona el estado. </span>
          </ion-item>
          </ion-list>
        </ion-col>
        <ion-col>
          <ion-list>
            <ion-item>
              <ion-input
                class="custom-colorLabel"
                formControlName="title_japanese"
                name="title_japanese"
                label="Titulo japones"
                labelPlacement="floating"
              ></ion-input>
              <span class="absolute" *ngIf="!formValid && formGroup.get('title_japanese')?.errors"> Agrega un título </span>
            </ion-item>
            <ion-item>
              <ion-input
                class="custom-colorLabel"
                formControlName="score"
                name="score"
                type="number"
                label="Puntaje"
                labelPlacement="floating"
              ></ion-input>
              <span class="absolute" *ngIf="!formValid && formGroup.get('score')?.errors"> Agrega un puntaje valido. </span>
            </ion-item>
            <ion-item>
              <ion-input
                class="custom-colorLabel"
                formControlName="imageUrl"
                name="imageUrl"
                type="url"
                label="Imagen"
                labelPlacement="floating"
              ></ion-input>
              <span class="absolute" *ngIf="!formValid && formGroup.get('imageUrl')?.errors"> Agrega la dirección de una imagen. </span>
            </ion-item>
          </ion-list>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col>
          <p>Genero:</p>
          <ion-item>
            <ion-select
              class="custom-colorLabel"
              formControlName="name_genre"
              name="name_genre"
              placeholder="Nombre del género"
            >
              <ion-select-option *ngFor="let option of genresList" [value]="option">
                {{ option }}
              </ion-select-option>
            </ion-select>

            <ion-select
              class="custom-colorLabel"
              placeholder="Selecciona tipo"
              name="type_select"
              formControlName="type_select"
            >
              <ion-select-option *ngFor="let option of types" [value]="option">
                {{ option }}
              </ion-select-option>
            </ion-select>
          </ion-item>

          <ion-button class="custom_button" expand="full" (click)="addGenre()">Agregar</ion-button>
        </ion-col>
      </ion-row>

      <ion-row *ngIf="genres.length > 0">
        <ion-col>
          <ion-list>
            <ion-item *ngFor="let genre of genres; let i = index">
              <p>{{ genre.name }} - {{ genre.type }}</p>
              <ion-button fill="clear" color="danger" (click)="removeGenre(i)">
                Eliminar
              </ion-button>
            </ion-item>
          </ion-list>
        </ion-col>
      </ion-row>

      <!-- Mensaje si no hay géneros -->
      <ion-row *ngIf="genres.length === 0">
        <ion-col>
          <ion-item>
            <ion-label class="alert">No hay géneros agregados.</ion-label>
          </ion-item>
        </ion-col>
      </ion-row>

      <ion-row>
        <ion-col>
          <ion-textarea
            class="custom-colorLabel"
            label="Sinopsis"
            labelPlacement="floating"
            formControlName="synopsis"
            name="synopsis"
          />
        </ion-col>
      </ion-row>
      <span *ngIf="!formValid && formGroup.get('synopsis')?.errors"> Agrega una sinopsis. </span>
      <ion-row>
        <ion-col>
          <ion-textarea
            class="custom-colorLabel"
            label="Background"
            labelPlacement="floating"
            formControlName="background"
            name="background"
          />
        </ion-col>
      </ion-row>
      <span *ngIf="!formValid && formGroup.get('background')?.errors"> Agrega un trasfondo. </span>
    </ion-grid>
    <ion-button class="custom_button" expand="full" (click)="sendAnime()" id="present-alert"> Crear. </ion-button>
  </form>

</div>
